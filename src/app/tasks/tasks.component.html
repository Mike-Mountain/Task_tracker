<ul class="tasks">
  <li *ngFor = "let task of tasks">

    <div class="tile is-ancestor">
      <div class="tile is-parent">
        <div class="tile is-child box task-details" [class.selected] = "task === selectedTask">
          <div class="columns">

            <div class="column is-8">
              <div class="task-title colm">
                <a class="subtitle">{{ task.Title }}</a>
              </div>
            </div>

            <div class="column">
              <div class="task-id colm has-text-centered">
                <p>task-id</p>
              </div>
            </div>

          </div>
          <div class="columns has-text-centered">

            <div class="column">
              <div class="task-category button colm">
                <p class="category">{{task.Category}}</p>
              </div>
            </div>    

            <div class="column">
              <div class="task-priority colm has-text-centered">
                <p class="priority">
                  {{ task.Priority }}
                </p>
              </div>
            </div>

            <div class="column">
              <div class="task-date colm">
                <p class="date">09 Jan</p>
              </div>
            </div>

          </div>
          <div class="columns">

            <div class="column">
              <div *ngIf="task === selectedTask">
                <div class="task-description box" id="descBox">
                  <p class="description has-text-left">
                    {{ task.Description }}
                  </p>
                  <br>
                  <div class="button is-small modal-btn" (click)="toggleModal()">Open Modal</div>
                </div>
                <br>
              </div>
              <a class="button show-more is-light" (click) = "onSelect(task)">
                <div class="show/hide">
                  <div *ngIf="task === selectedTask">
                    <div class="icon">
                      <i class="fas fa-angle-up"></i>
                    </div>
                  </div>
                  <div *ngIf="task != selectedTask">
                    <div class="icon">
                      <i class="fas fa-angle-down"></i>
                    </div>
                  </div>
                </div>
              </a>
            </div>

          </div>
        </div>
      </div>
    </div>
    <!-- <span class="badge">task-{{task.id}}</span><span class="name"> {{task.Title}}</span><span class="summary has-text-left"><br><br><br> {{ task.summary }}</span> -->
    <br>
  </li>
</ul>
<div>
  <label>Task name:
    <input #taskName />
  </label>
  <!-- (click) passes input value to add() and then clears the input -->
  <button (click)="add(taskName.value); taskName.value=''">
    add
  </button>
</div>

<!-- <div class="task">
  <div class="task-header">
    <span class="task-name">{{ task.name }}</span>
    <span class="tak-id">task-{{ task.id }}</span>
  </div>
  <div class="task-body content">
    <div class="summary">
      {{ task.summary }}
    </div>
    <div class="description">
      <p>task.description</p>
    </div>
  </div>
</div> -->

<div class="modal" [ngClass]="{ 'is-active' : isModalActive }">
  <div class="modal-background" (click)="toggleModal()"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Task Name</p>
      <button class="delete" 
        aria-label="close"
        (click)="toggleModal()"></button>
    </header>
    <section class="modal-card-body">
      <app-single-task [task] = "selectedTask"></app-single-task>
    </section>
    <footer class="modal-card-foot">
      <button class="button is-success is-one-third" 
        aria-label="save" 
        (click)="toggleModal()">Save Changes</button>
      <button class="button is-danger is-one-third">Delete</button>
      <button class="button is-one-third" (click)="toggleModal()">Cancel</button>
    </footer>
  </div>
  <button class="modal-close is-large" 
    aria-label="close" 
    (click)="toggleModal()"></button>
</div>

